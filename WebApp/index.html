<html>
<head>
    <title>{TITLE}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>
<body>
    <div id="root"></div>
    <script type="module" src="/index.js"></script>
    <script>
        setInterval(() => {
            fetch("/dev")
                .then(res => res.json())
                .then(timestamp => {
                    const lastBuildTimeStr = window.localStorage.getItem("buildTime")
                    if(!lastBuildTimeStr)
                        return window.localStorage.setItem("buildTime", timestamp.toString());

                    const lastBuildTime = Number(lastBuildTimeStr);
                    if(lastBuildTime < timestamp) {
                        window.localStorage.setItem("buildTime", timestamp.toString());
                        window.location.reload();
                    }
                });
        }, 1000);
    </script>
</body>
</html>
