FROM docker:dind

RUN apk add --update make g++ nodejs npm git python3
RUN npm i -g typescript node-pty

COPY . /fullstacked

RUN cd /fullstacked && npm ci
RUN cd /fullstacked && node packages/ide/install

WORKDIR /home

CMD ["/bin/sh", "-c", "/usr/local/bin/dockerd-entrypoint.sh & DOCKER_HOST=\"\" fsc ide"]
